<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Developers Against Humanity. An enjoyable card game with other users. Online version of Cards against humanity with a twist for Coding developers.">
    <meta name="keywords" content="game, cards, online, against, humanity, devlopers, black card, white card, funny, humor ">
    <meta name="author" content="Developers Against Humanity">

    <!-- Favicon-->
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">

    <link id="style" rel="stylesheet" type="text/css" href="stylelanding.css">
    <!-- <link rel="stylesheet" type="text/css" href=""> -->

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">


    <title>Developers Against Humanity</title>
    <script src="/socket.io/socket.io.js"></script>
  </head>
  
  <!-- Content -->

  <body>
<div class="container" id="first">
  <div class="statsbox">  
    <div class="statsTitle">Top Stats</div>
    <div class="stats">
        <li id="topplayer1">Walid - 7 </li>
        <li id="topplayer1">Kevin - 6 </li>
        <li id="topplayer1">Jennifer - 5 </li>
        <li id="topplayer1">Tiffany - 4 </li>
    </div>  
  </div> 
  <br>
  <div class="jumbotron text-center">

    <div id="animation"><h1><img src="favicon.ico" style="height: 90px">Developers Against Humanity</h1> 
    </div>

     <!-- Secondary, outline button -->
    <button type="button" id="login" class="btn btn-default btn-block btn-lg">Login</button>

    <!-- <button type="button" id="register" class="btn btn-default btn-lg">Register</button> -->
      
  </div>

  <div id="resultsModal" class="modal fade" role="dialog">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h2 class="modal-title"><strong>Create a Profile</strong></h2>
        </div>
        <div class="modal-body">
          <h4>Name (Required)</h4>
          <input type="text" name="" id="name" class="form-control" required >
          <!-- <h4>Password (Required)</h4> -->
          <!-- <input type="text" name="" id="pass" class="form-control" required > -->
        </div>
        <div class="modal-footer">
          <button type="button" id="submitUser" class="btn btn-primary" data-dismiss="modal">Submit</button>
        </div>
      </div>

    </div>
  </div>

  <nav class="navbar text-center navbar-fixed-bottom">
  <div class="container">
  <div class="invite">
      Invite Your Dumb Friends 
      <a class="btn icon-btn btn-sm btn-default" href="https://www.facebook.com/" target="_blank"><span class="glyphicon btn-glyphicon glyphicon-share img-circle text-info"></span>Invite</a>
  </div>    
 </div>
</nav>
</div>

  <div class="container" id="cool" style="display:none">
    <div id="jumbo" class="jumbotron text-center">


      <div id="animation"><h1><img src="favicon.ico" style="height: 90px">Developers Against Humanity</h1> </div>   

      <div class="directionsTitle"><h3>Your Dumb Directions:</h3> </div>
      <div class="directions">The game is simple. Each round, one player asks a question from a black card, and everyone else answers with their funniest white card.</div>
      
    </div> <!-- Jumbotron end-->

    <div class="text-center">
        <div class="row">
            <div class="col-sm-5">
                <div class="scores">Scores:</div>
                        <div class="score-board">
                        <div class="player">
                            <h4>Player 1</h4>
                            <div class="score-box">
                               3 
                            </div>
                        </div>
                        <div class="player">
                            <h4>Player 2</h4>
                            <div class="score-box">
                               5 
                            </div>
                        </div>
                        <div class="player">
                            <h4>Player 3</h4>
                            <div class="score-box">
                               5 
                            </div>
                        </div>
                    </div>
              </div> <!--col-->  
              <div id="b" class="col-sm-2">
                
              </div>  
          <div class="col-sm-5">      
              <div class="judge">You are: </div><br>
                  <div class= "judge-box"></div>
          </div> <!--col-->
      </div> <!--row-->
          <br>

        <div class="row">
         <div class="col-sm-3" id="idk">
              <ul id="users" class= "bctitle">Users Online:</ul>
                
                
                
          </div>  <!--col-->

          <div class="col-sm-9">
            <div class= "wctitle">
            <div class="row">
              <h3>Your Deck:</h3>
            </div>
            <div class="row" id="whites">
              
            </div>

                  
            </div> <!--col-->
        </div> <!--row-->

            
    </div> <!--text-center-->
  </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <!-- <script src="js.js" type="text/javascript"></script> -->
    <script type="text/javascript">
      socket = io();
      socket.on('user', function(data){
        // console.log("IDK")
        console.log("NEW USER: " + data.name)
          
        var li = $('<li></li>').text(data.name).addClass('bctitle');
        $("#users").append(li);
        
      });
      socket.on('hey', function(game) {
        console.log(game);
        for (var i = 0; i < game.players.length; i++) {
          console.log(game.players[i])
          console.log($(".yolo").val())
          if(game.players[i].name == $(".yolo").text()) {
            $("#b").append($("<div></div>")).addClass("blackCard").text(game.currentBlackCard);
            me = game.players[i];
            console.log("ME: " + me)
            for (var i = 0; i < me.hand.length; i++) {

              var div = $("<div></div>").text(me.hand[i]).addClass('col-sm-2').addClass('heyo').addClass('card' + (i+1));
              $("#whites").append(div);
            }
          }
        }
      })

      $(document).on('click', '.heyo', function(event) {
        if (!me.isJudge) {
          console.log(event);
          socket.emit('choice', event.toElement.innerHTML)
        }
        
        //do something
      });


      function saveData () {
        var user = {
              name: $("#name").val(),
              password: $("#pass").val()
            };
        var currentURL = window.location.origin;
            // console.log(currentURL + "/player/" + user.name);
        $.post(currentURL + "/player/" + user.name, user, function (data) {
              // console.log(data)

              // window.location = data.redirectUrl
              console.log(data.array)
          for (var i = 0; i < data.array.length -1; i++) {
            var li = $('<li></li>').text(data.array[i]).addClass('bctitle');
            $("#users").append(li);
            
          }
          newPerson(data);
        });
      }
        
      
      function newPerson (user) {
        // console.log(user);
        $("#first").toggle();
        $("#resultsModal").modal('toggle');
        $("#style").attr('href', 'style.css');
        $("#cool").toggle();
        var div = $('<h4></h4>').text(user.name).addClass('yolo');
        $(".judge-box").append(div);
        socket.emit('user', user);

        
        
        
        return false;
      }
            
            // emit(user);
            
  // // });
  //           for (var key in user) {
  //                         console.log("html: " + key);
  //           };
            // socket.emit('new user', user);
            
      
      $("#login").on('click', function () {
        $("#resultsModal").modal('toggle');
      })

      $("#submitUser").on('click', function () {
        
        var isValid = true;
        $('.form-control').each(function() {
          if ( $(this).val() === '' )
            isValid = false;
        });
          // If all required fields are filled
        if (isValid == true) {
          // Create an object for the user's data
          
          
          saveData()
          // Grab the URL of the website
          
          // AJAX post the data to the friends API. 
          
        }else{
            alert("Please fill out all fields before submitting!");
        }
            
        return false;
      });
    </script>
    

  </body>

</html>



